<!doctype html>
<html lang="es">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <link rel='stylesheet' href='css/boxicons.min.css'>
    <link rel="stylesheet" href="css/style.css">
    <link rel=”stylesheet” href=”https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.1/css/bootstrap.min.css” />

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <title>Club Atletismo Santiago</title>
    <meta name="title" content="Inscritos en Competiciones | Club Atletismo Santiago" />
    <meta name="description"
        content="Consulta los atletas inscritos en las diferentes competiciones. Club adscrito a la Federación Gallega de Atletismo (FGA). Hecho por atletas para atletas." />
    <meta name="keywords" content="CAS,Club Atletismo Santiago, Atletismo Santiago, Club Atletismo, Atletismo,AtletismoSantiago,ClubAtletismoSantiago,AtletismoGalego,FederacionGalegaAtletismo,FederacionGallegaAtletismo,FGA,GaliciaAtletismo,CarreirasGalegas,AtletismoGallego,PistaCubierta,PistaCuberta,PistaAireLibre,PistaAlAireLibre,PistaCorta,PistaCurta,CampeonatoGallegoAtletismo,CrossGalicia,TrailGalicia,Galicia,AtletismoCoruna,AtletismoLugo,AtletismoOurense,AtletismoPontevedra,AtletismoVigo,CorrerEnGalicia,RunningSantiago,DeporteGallego,RunnersGalicia,AtletismoGalicia,CorrerEnCompostela,RunnersCompostela,AtletasGallegos,SantiagoRunners,GaliciaEnForma,CarreraPopularSantiago,CarreraPedestreSantiago,SantYago10k,SantYago,Corresan,ConcelloSantiago,RunGallego,AtletismoEspaña,EntrenamientoAtletismo,CorrerEsVida,AtletismoJuvenil,AtletismoFemenino,CompostelaRunnersClub,GaliciaActiva,ViveElDeporteGallego,CorrerPorSalud,EntrenamientoGallego,AtletismoPopular,RunSantiagoRun,AtletismoCoruña,GaliciaRunnersClub,RunGallegoRun,SantiagoDeporte,CarreraGallega,CorrerEnSantiagoDeCompostela,AtletismoCorredores,ClubDeportivoSantiago,RunnersVigo,GaliciaRun,EntrenamientoDeAtletismo,CorrerGallego,SantiagoRunClub,DeporteCompostela,CaminodeSantiagoRunning,AtletismoInfantil,CorrerPorGalicia,RunnersJuveniles,DeporteSantiagués,GaliciaSaludable,AtletismoViral,CorrerConPasión,SantiagoRunnersLife,GaliciaEnCarrera,AtletismoGallegoRun,RunnersCoruña,CorrerSantiagoGalicia,SantiagoRunnersCommunity,ClubAtletismoGallego,RutasDeRunningSantiago,DeporteCoruña,AtletismoCoruñés,CorrerEnGallego,SantiagoTrailRunning,RunningGallego,CarreraAtletismoSantiago,GaliciaRunnersLife,ClubAtletismoCoruña,SantiagoAtletismoActivo,CorrerEnEquipo,AtletismoConPasión,GaliciaRunAndFun,RunningSantiagoDeCompostela,AtletismoCorrerVivir,SantiagoRunnersFamily,GaliciaRunnersChallenge,CorrerEsVivirGalicia,AtletismoSantiagoRunClub,RutasDeAtletismoGallego,PistaAtletismoGalicia,CampeonatoGallegoAtletismo,CompeticionesAtletismoSantiago,PistaYCampoGalicia,SantiagoCompeticionesAtletismo,GaliciaRunnerChallenge,CampeonatoGallegoPista,AtletismoSantiagoCompetición,GaliciaRunnersChampionship,SantiagoPistaAtletismo,CampeonatoAtletismoCoruña,GaliciaTrackAndField,CompeticionesDeportivasSantiago,AtletismoGallegoChampion,CampeonatoGallegoRunning,PistaAtletismoCoruña,CompetenciasGallegasSantiago,GaliciaAtletismoChallenge,SantiagoCampeonatoAtletismo,CampeonatoGallegoRunner,AtletismoEnPistaGallega,GaliciaAthleticsChampion,SantiagoRunningCompetition,CampeonatoGallegoRunners,PistaAtletismoSantiagoGalicia,Running,Runners,Run,Correr,Corredores,ComoEmpezarACorrer,NiñosCorrer,NenosAtletismo,AtletismoSub18,AtletismoSub20,AtletismoSub23,AtletismoSub16, EscuelaAtletismo" />
    <meta name="robots" content="index, follow" />
    <meta name="author" content="Atletismo Santiago" />

    <meta property="og:image" content="https://www.atletismosantiago.club/img/estadisticas.webp">
    <meta name="twitter:image" content="https://www.atletismosantiago.club/img/estadisticas.webp">


</head>

<body data-bs-spy="scroll" data-bs-target=".navbar">

    <!-- TOP NAV -->
    <div class="top-nav" id="home">
        <div class="container px-4">
            <div class="row justify-content-between">
                <div class="col-auto">
                    <p> <i class='bx bxs-envelope'></i> atletismosantiago@gmail.com</p>
                </div>
                <div class="col-auto social-icons">
                    <a href="https://www.facebook.com/clubatletismo.santiago/?locale=es_ES"
                        aria-label="Facebook de Atletismo Santiago"><i class='bx bxl-facebook'></i></a>
                    <a href="https://www.instagram.com/atletismosantiago/?hl=es"
                        aria-label="Instagram del AtletismoSantiago"><i class='bx bxl-instagram'></i></a>
                </div>
            </div>
        </div>
    </div>



    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top" id="barraNavegacion">
        <div class="container px-4">
            <a class="navbar-brand" href="./index.html" style="max-width: 40%">
                <img src="./img/logo.webp" alt="Club Atletismo Santiago Logo" style="max-width: 50%; height: auto;">
            </a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto my-2 my-lg-0 ">
                    <li nav-item>
                        <a href="./index.html" class="nav-link">Inicio</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="" role="button" data-toggle="dropdown"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Club
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="./historia.html">Historia</a></li>
                            <li><a class="dropdown-item" href="./noticias.html">Últimas Noticias</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="./calendario.html" class="nav-link">Calendario</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="" role="button" data-toggle="dropdown"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Estadísticas
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="./records_club.html">Récords del Club</a></li>
                            <li><a class="dropdown-item" href="./estadisticas_atleta.html">Estadísticas Atletas</a></li>
                            <li><a class="dropdown-item" href="./ranking_club.html">Ranking del Club</a></li>

                        </ul>
                    </li>
                    <li class="nav-item">
                        <a href="./patrocinadores.html" class="nav-link ">Patrocinadores</a>
                    </li>
                    <li class="nav-item">
                        <a href="./contacto.html" class="nav-link ">Contacto</a>
                    </li>

                </ul>
            </div>
        </div>

    </nav>

    <div class="container mt-5 py-1">
        <div class="container">
            <div class="text-center pb-1 wow fadeInUp" data-wow-delay="0.1s">
                <h5 class="text-primary-gradient fw-medium">COMPETICIONES</h5>
                <h1 class="mb-1">Atletas Inscritos en Competiciones</h1>
                <p class="mt-3 mb-0">A continuación, podrás visualizar los atletas del club inscritos en las próximas
                    competiciones
                </p>
                <hr class="divider" />
                <br>
            </div>

        </div>

        <div class="container">
            <div class="row justify-content-center text-center d-flex align-items-center mt-0">

                <style>
                    .table-wrapper {
                        width: 100%;
                        overflow: auto;
                    }

                    .table-wrapper table {
                        border-collapse: separate;
                        border-spacing: 0;
                    }


                    .table-wrapper table th,
                    .table-wrapper table td {
                        border: 1px solid #000;
                        background-color: #FFF;
                        vertical-align: middle;

                    }
                </style>

                <div class="col-md-8 mt-3 table-wrapper">
                    <p id="loading-message" style="text-align: center;font-weight: 700 !important;
            color: #092932;font-size: large;">Cargando los atletas inscritos, espera unos segundos...</p>
                    <table id="inscritos" class="table ">
                        <!-- Aquí se mostrarán los resultados de la consulta -->
                    </table>
                </div>
            </div>
        </div>
    </div>










    <!-- Footer-->
    <footer class="bg-light py-5 mt-5">

        <div class="container">
            <div class="row">
                <div class="col-6 col-md-3 mb-3">
                    <h5>Atletismo Santiago</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="./index.html" class="nav-link p-0 text-muted">Inicio</a></li>
                        <li class="nav-item mb-2"><a href="" class="nav-link p-0 text-muted">Club</a></li>
                        <li class="nav-item mb-2"><a href="./calendario.html"
                                class="nav-link p-0 text-muted">Calendario</a></li>
                        <li class="nav-item mb-2"><a href="" class="nav-link p-0 text-muted">Estadisticas</a></li>
                        <li class="nav-item mb-2"><a href="./patrocinadores.html"
                                class="nav-link p-0 text-muted">Patrocinadores</a></li>
                        <li class="nav-item mb-2"><a href="./contacto.html" class="nav-link p-0 text-muted">Contacto</a>
                        </li>

                    </ul>
                </div>
                <div class="col-6 col-md-3 mb-3">
                    <h5>Club</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="./historia.html" class="nav-link p-0 text-muted">Historia</a>
                        </li>



                        <li class="nav-item mb-2"><a href="./noticias.html" class="nav-link p-0 text-muted">Últimas
                                Noticias</a></li>

                    </ul>
                    <h5>Estadísticas</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="./records_club.html" class="nav-link p-0 text-muted">Récords
                                del Club</a></li>

                        <li class="nav-item mb-2"><a href="./estadisticas_atleta.html"
                                class="nav-link p-0 text-muted">Estadísticas Atletas</a></li>

                        <li class="nav-item mb-2"><a href="./ranking_club.html" class="nav-link p-0 text-muted">Ranking
                                del Club</a></li>

                    </ul>
                </div>
                <div class="col-md-5 offset-md-1 mb-3">
                    <form>
                        <h5>Contacto</h5>
                        <p>Si tienes alguna pregunta no dudes en ponerte en contacto con nosotros</p>
                        <div class="d-flex flex-column flex-sm-row w-100 gap-2">
                            <label for="newsletter1" class="visually-hidden">Correo electrónico</label>
                            <input id="email" type="text" class="form-control" placeholder="Correo electrónico">
                            <label for="subject" class="visually-hidden">Asunto</label>
                            <input id="subject" type="text" class="form-control" placeholder="Asunto">

                        </div>
                        <div class="d-flex flex-column flex-sm-row w-100 gap-2 mt-2">
                            <label for="message" class="visually-hidden">Mensaje</label>
                            <textarea id="message" type="text" class="form-control" placeholder="Mensaje"></textarea>
                        </div>
                        <div
                            class="d-flex flex-column flex-sm-row w-100 mt-2 text-center justify-content-center align-items-center">
                            <button class="btn btn-primary" type="button" onclick="sendEmail()">Enviar</button>
                        </div>


                    </form>

                </div>
            </div>
            <div class="d-flex flex-column flex-sm-row justify-content-between border-top text-center">
                <p>&copy; 2025 Reservados todos los derechos. <a
                        href="https://www.linkedin.com/in/oscar-toimil-plaza/" style="color:#5e5b5b"
                        target="_blank" rel="noopener noreferrer">Ó. Toimil</a>. &copy;</p>

                <ul class="list-unstyled d-flex justify-content-center justify-content-sm-end mt-3 mt-sm-0">
                    <li class="ms-4"><a class="bi bi-instagram link-dark d-none d-sm-inline"
                            href="https://www.instagram.com/atletismosantiago/?hl=es"
                            aria-label="Instagram de Atletismo Santiago"></a></li>
                    <li class="ms-4"><a class="bi bi-facebook link-dark d-none d-sm-inline"
                            href="https://www.facebook.com/clubatletismo.santiago/?locale=es_ES"
                            aria-label="Facebook de Atletismo Santiago"></a></li>
                </ul>
            </div>
            <div class="row mt-3">
                <div class="col-md-12">
                    <p class="text-center"> <a href="./politica_privacidad.html" class="text-decoration-none">Política de Privacidad</a> | <a href="./aviso_legal.html" class="text-decoration-none">Aviso Legal</a></p>
                </div>
            </div>


        </div>
    </footer>





    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/app.js"></script>

    <script>
        var urlJSON = "https://script.google.com/macros/s/AKfycbzhcAFKQOfKv43okQxFcMOggmXRAdLzpLjsumc7WMdPSzkmaGw8co6tSqosKAJ1bET4wQ/exec";

        // Mostrar mensaje de carga
        document.getElementById('loading-message').innerHTML = 'Cargando los atletas inscritos, espera unos segundos...';

        // Hacer la solicitud HTTP
        fetch(urlJSON)
            .then(response => response.json())
            .then(data => {
                // Filtrar datos para excluir filas vacías
                var tablaData = data.filter(fila => fila["Nombre de la Competición"] !== "");

                // Formatear las fechas en la tablaData
                tablaData.forEach(fila => {
                    fila["Fecha de la Competición"] = formatearFecha(fila["Fecha de la Competición"]);
                });

                // Mostrar la tabla
                mostrarTabla(tablaData);

                // Ocultar mensaje de carga
                document.getElementById('loading-message').style.display = 'none';
            })
            .catch(error => {
                // Manejar errores, por ejemplo, mostrar un mensaje de error
                document.getElementById('loading-message').innerHTML = 'Error al cargar la tabla. Por favor, inténtelo de nuevo más tarde.';
            });



        function mostrarTabla(data) {
            // Obtener el encabezado de la tabla
            var tableHead = '<thead><tr>';
            var headers = Object.keys(data[0]);

            for (var i = 0; i < headers.length; i++) {
                tableHead += '<th>' + headers[i] + '</th>';
            }

            tableHead += '</tr></thead>';

            // Obtener el cuerpo de la tabla
            var tableBody = '<tbody>';

            var gruposProcesados = []; // Almacenar las combinaciones de "Nombre de la Competición" ya procesadas
            data.sort((a, b) => new Date(a["Fecha de la Competición"]) - new Date(b["Fecha de la Competición"]));


            for (var i = 0; i < data.length; i++) {
                var currentNombreComp = data[i]["Nombre de la Competición"];
                var currentFechaComp = data[i]["Fecha de la Competición"];

                // Verificar si esta combinación ya fue procesada
                if (!gruposProcesados.includes(currentNombreComp + currentFechaComp)) {
                    gruposProcesados.push(currentNombreComp + currentFechaComp);

                    // Filtrar los datos para obtener los atletas con la misma combinación de competición y fecha
                    var atletasMismoGrupo = data.filter(fila => fila["Nombre de la Competición"] === currentNombreComp && fila["Fecha de la Competición"] === currentFechaComp);

                    // Crear la fila para este grupo
                    tableBody += '<tr>';
                    tableBody += '<td rowspan="' + atletasMismoGrupo.length + '">' + currentNombreComp + '</td>';
                    tableBody += '<td rowspan="' + atletasMismoGrupo.length + '">' + currentFechaComp + '</td>';

                    // Iterar sobre los atletas del grupo y agregarlos a la tabla
                    atletasMismoGrupo.forEach(atleta => {
                        tableBody += '<td>' + atleta["Nombre y Apellidos del Atleta"] + '</td>';
                        tableBody += '<td>' + atleta["Pruebas a realizar y marca en esas pruebas"] + '</td>';
                        tableBody += '<td>' + atleta["Observaciones"] + '</td>';
                        tableBody += '</tr>';
                    });
                }
            }

            tableBody += '</tbody>';

            // Construir la tabla completa
            var table = '<table class="table">' + tableHead + tableBody + '</table>';

            // Insertar la tabla en el elemento con el ID 'inscritos'
            document.getElementById('inscritos').innerHTML = table;
        }
        function calcularRowspan(data, currentIndex, nombreColumna, fechaColumna) {
            var rowspanValue = 1;

            for (var i = currentIndex + 1; i < data.length; i++) {
                if (data[currentIndex][nombreColumna] === data[i][nombreColumna] && data[currentIndex][fechaColumna] === data[i][fechaColumna]) {
                    rowspanValue++;
                } else {
                    break;
                }
            }

            return rowspanValue;
        }


        function formatearFecha(fecha) {
            // Crear un objeto Date a partir de la cadena de fecha
            
            var fechaObj = new Date(fecha);

            // Obtener día, mes y año
            var dia = fechaObj.getDate();
            var mes = fechaObj.getMonth() + 1; // Los meses van de 0 a 11 en JavaScript, así que sumamos 1
            var año = fechaObj.getFullYear();

            // Formatear la fecha en el formato día/mes/año
            var fechaFormateada = dia + '/' + mes + '/' + año;

            return fechaFormateada;
        }

        function convertirAFecha(fechaString) {
            // Dividir la cadena de fecha en día, mes y año
            var partesFecha = fechaString.split('/');
            var dia = parseInt(partesFecha[0], 10);
            var mes = parseInt(partesFecha[1], 10) - 1; // Restar 1 porque los meses van de 0 a 11 en JavaScript
            var año = parseInt(partesFecha[2], 10);

            // Crear un objeto de fecha con las partes extraídas
            var fecha = new Date(año, mes, dia);

            return fecha;
        }
    </script>


</body>

</html>